---
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section class="hero-section relative h-[665px] -mt-16 pt-16 overflow-hidden">
  <video 
    id="hero-video"
    class="hero-video"
    autoplay 
    muted 
    loop
    playsinline
    preload="none"
    poster="/img/maloca-ceremonial.webp"
  >
    <source src="/hero.mp4" type="video/mp4">
    <img src="/img/maloca-ceremonial.webp" alt="Casa del Jaguar Hero" class="w-full h-full object-cover">
  </video>

  <div class="relative z-20 flex items-center justify-center h-full">
    <div class="text-center text-white max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 font-georgia leading-tight">
        {lang === 'es' ? 'Ábrete a los milagros' : 'Awaken to miracles'}
      </h1>

      <p class="text-lg md:text-xl lg:text-2xl mb-8 font-gotham leading-relaxed opacity-90">
        {lang === 'es' 
          ? 'La Casa del Jaguar es un exclusivo retiro de lujo con todo incluido de medicina ancestral' 
          : 'Casa del Jaguar is a leading all-inclusive luxury plant medicine retreat'
        }
      </p>

      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a 
          href="/booking" 
          class="book-now bg-brand-gold text-brand-dark px-8 py-4 rounded-lg font-bold text-lg hover:scale-101 hover:shadow-lg transition-all duration-300 font-gotham shadow-lg uppercase"
        >
          {lang === 'es' ? 'Reserva Ahora' : 'Book Now'}
        </a>
        
        <button 
          id="watch-video-btn"
          class="text-brand-dark bg-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-[#402A1E] hover:scale-101 hover:shadow-lg transition-all duration-300 font-gotham flex items-center gap-2 uppercase"
          aria-label={lang === 'es' ? 'Reproducir video de presentación de Casa del Jaguar' : 'Play Casa del Jaguar presentation video'}
        >
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          {lang === 'es' ? 'Mira el video' : 'Watch the Video'}
        </button>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('hero-video') as HTMLVideoElement;
    if (video) {
      video.play().catch(function(error: any) {
        console.log('Video autoplay failed, trying to play manually:', error);
      });
    }
  });
</script>

<style>
  .hero-section {
    position: relative;
    width: 100%;
    height: 550px;
    overflow: hidden;
  }

  .hero-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hero-content {
    animation: fadeInUp 1s ease-out;
  }

  #watch-video-btn:hover {
    color: white;
  }

  .book-now:hover {
    background-color: #F2CF8D;
  }
</style>
