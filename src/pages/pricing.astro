---
import Layout from '@/layouts/Layout.astro';
import CountrySelect from '@/components/CountrySelect.astro';
import PhoneCodeSelect from '@/components/PhoneCodeSelect.astro';
import { useTranslations } from '@/i18n/utils';
import GoogleReviews from '@/components/GoogleReviews.astro';
import Services from '@/components/Services.astro';
import TestimonialVideos from '@/components/TestimonialVideos.astro';

const t = useTranslations('es');

const pageTitle = "Precios - Retiro de 7 Días Todo Incluido | Casa del Jaguar";
const pageDescription = "Experimenta una transformación profunda con nuestro retiro de medicina ancestral de 7 días todo incluido. Desde $4,900 USD incluye ceremonias, alojamiento de lujo y prácticas de bienestar.";
const pageKeywords = "precios Casa del Jaguar, retiro ayahuasca costo, medicina ancestral precio, retiro 7 días Iquitos, reservar retiro espiritual";
---

<Layout 
  title={pageTitle}
  description={pageDescription}
  keywords={pageKeywords}
>
  <section class="hero relative h-[500px] -mt-16 pt-16 flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
      <img 
        src="/img/centro-pasadiso.webp" 
        alt="Casa del Jaguar - Retiro de medicina ancestral"
        class="w-full h-full object-cover"
      />
    </div>

    <div class="relative z-10 max-w-6xl mx-auto px-4 md:px-8 text-center">
      <h1 class="scroll-animate text-4xl md:text-6xl font-bold text-white font-georgia mb-8 leading-tight">
        Experiencia de 7 Días Todo Incluido<br>
        <span class="text-brand-primary">Desde $2,800 USD</span>
      </h1>
      
      <p class="scroll-animate text-xl md:text-[19px] text-white mb-12 max-w-4xl mx-auto font-gotham leading-relaxed">
        Una inversión en tu transformación personal que incluye ceremonias de medicina ancestral, prácticas de bienestar y alojamiento de lujo en el corazón de la Amazonía.
      </p>
    </div>
  </section>


  <section class="py-20 bg-white scroll-animate">
    <div class="max-w-7xl mx-auto px-4 md:px-8">
      <div class="grid lg:grid-cols-2 gap-16 items-start">
        <div class="space-y-8">
          <div class="scroll-animate">
            <h2 class="text-4xl md:text-5xl font-bold text-brand-dark font-georgia mb-6">
              Tu Viaje de Transformación Incluye
            </h2>
            <p class="text-lg text-brand-dark font-gotham leading-relaxed mb-8">
              Nuestro retiro de 7 días está cuidadosamente diseñado para ofrecerte una experiencia completa de sanación y crecimiento personal en un entorno de lujo y seguridad.
            </p>
          </div>

          <div class="border-l-4 border-brand-primary pl-6 scroll-animate">
            <p class="text-sm text-gray-600 font-gotham leading-relaxed mb-2">
              <strong>Nota sobre precios:</strong> El precio final puede variar según la selección de habitación y servicios adicionales. Las habitaciones premium y suites tienen un costo adicional.
            </p>
          </div>
        </div>

        <div class="lg:sticky lg:top-8">
          <div class="bg-white shadow-2xl rounded-2xl p-8 border border-gray-100 scroll-animate">
            <h3 class="text-2xl font-bold text-brand-dark font-georgia mb-2">
              Reserva tu Sesión Informativa Gratuita
            </h3>
            <p class="text-gray-600 font-gotham mb-6">
              Completa este formulario y nos pondremos en contacto contigo para programar una consulta personalizada.
            </p>

            <form id="pricingForm" class="space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label for="firstName" class="block text-sm font-semibold text-brand-dark font-gotham mb-2">
                    Nombre *
                  </label>
                  <input 
                    type="text" 
                    id="firstName" 
                    name="firstName" 
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-colors font-gotham"
                    placeholder="Tu nombre"
                  />
                  <span class="error-message text-red-500 text-sm hidden">Este campo es requerido</span>
                </div>
                <div>
                  <label for="lastName" class="block text-sm font-semibold text-brand-dark font-gotham mb-2">
                    Apellido *
                  </label>
                  <input 
                    type="text" 
                    id="lastName" 
                    name="lastName" 
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-colors font-gotham"
                    placeholder="Tu apellido"
                  />
                  <span class="error-message text-red-500 text-sm hidden">Este campo es requerido</span>
                </div>
              </div>

              <div>
                <label for="email" class="block text-sm font-semibold text-brand-dark font-gotham mb-2">
                  Email *
                </label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-colors font-gotham"
                  placeholder="tu@email.com"
                />
                <span class="error-message text-red-500 text-sm hidden">Por favor ingresa un email válido</span>
              </div>

              <div>
                <label for="country" class="block text-sm font-semibold text-brand-dark font-gotham mb-2">
                  País *
                </label>
                <CountrySelect 
                  id="country" 
                  name="country" 
                  required={true}
                  lang="es"
                />
                <span class="error-message text-red-500 text-sm hidden">Por favor selecciona tu país</span>
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label for="phoneCode" class="block text-sm font-semibold text-brand-dark font-gotham mb-2">
                    Código de País *
                  </label>
                  <PhoneCodeSelect 
                    id="phoneCode" 
                    name="phoneCode" 
                    required={true}
                    lang="es"
                  />
                  <span class="error-message text-red-500 text-sm hidden">Por favor selecciona tu código de país</span>
                </div>
                <div>
                  <label for="phone" class="block text-sm font-semibold text-brand-dark font-gotham mb-2">
                    Teléfono *
                  </label>
                  <input 
                    type="tel" 
                    id="phone" 
                    name="phone"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-colors font-gotham"
                    placeholder="123-4567"
                  />
                  <span class="error-message text-red-500 text-sm hidden">Este campo es requerido</span>
                </div>
              </div>

              <button 
                type="submit" 
                class="w-full bg-brand-dark text-white py-4 px-6 rounded-lg font-semibold font-gotham text-lg transition-all duration-300 hover:bg-opacity-90 hover:shadow-lg focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
                id="submitButton"
              >
                Enviar Solicitud
              </button>
            </form>

            <div id="successMessage" class="hidden mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
              <div class="flex items-center">
                <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3">
                  <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div>
                  <h4 class="font-semibold text-green-800 font-gotham">¡Gracias por tu interés!</h4>
                  <p class="text-green-700 font-gotham text-sm">Nos pondremos en contacto contigo pronto para programar tu sesión informativa gratuita.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-16 bg-[#fffcf6] scroll-animate">
    <div class="max-w-7xl mx-auto px-4 md:px-8">
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="text-center">
          <div class="w-12 h-12 bg-[#D99D55] rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-brand-dark" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <p class="text-brand-dark font-gotham text-sm leading-relaxed">
            Más del 98% de nuestros huéspedes reportan una transformación monumental que describen como un "milagro".
          </p>
        </div>

        <div class="text-center">
          <div class="w-12 h-12 bg-[#D99D55] rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-brand-dark" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <p class="text-brand-dark font-gotham text-sm leading-relaxed">
            Experimenta ayahuasca de forma segura en el único resort de medicina vegetal con licencia médica en el mundo.
          </p>
        </div>

        <div class="text-center">
          <div class="w-12 h-12 bg-[#D99D55] rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-brand-dark" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <p class="text-brand-dark font-gotham text-sm leading-relaxed">
            Integra y comprende tus experiencias con ayahuasca en clases diarias con líderes de pensamiento.
          </p>
        </div>

        <div class="text-center scroll-animate">
          <div class="w-12 h-12 bg-[#D99D55] rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-brand-dark" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <p class="text-brand-dark font-gotham text-sm leading-relaxed">
            Visita las comunidades indígenas ubicadas en Iquitos.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-white">
    <div class="max-w-[1500px] mx-auto px-4 md:px-8">
      <div class="text-center mb-16 scroll-animate">
        <h2 class="max-w-[1200px] mx-auto text-4xl md:text-5xl font-bold text-brand-dark font-georgia mb-6">
          Transforma tu vida con el método Casa del Jaguar, un programa altamente eficaz que fusiona las ceremonias de ayahuasca y la psicología moderna.
        </h2>
      </div>

      <div class="grid md:grid-cols-3 gap-8 md:gap-10">
        <div class="text-center group scroll-animate">
          <div class="w-16 h-16 mx-auto mb-6 text-[#F2AB27]">
            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 1 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-brand-dark font-georgia mb-4">Apoyo de Integración</h3>
          <p class="text-gray-600 font-gotham leading-relaxed">
            Clases diarias con facilitadores expertos te ayudan a procesar y integrar tus experiencias de manera profunda y significativa. Recibes herramientas prácticas para llevar la transformación a tu vida cotidiana.
          </p>
        </div>

        <div class="text-center group scroll-animate">
          <div class="w-16 h-16 mx-auto mb-6 text-[#F2AB27]">
            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-brand-dark font-georgia mb-4">Seguridad Médica</h3>
          <p class="text-gray-600 font-gotham leading-relaxed">
            Somos el único resort de medicina vegetal con licencia médica completa en el mundo. Nuestro equipo médico profesional garantiza tu seguridad durante toda la experiencia.
          </p>
        </div>

        <div class="text-center group scroll-animate">
          <div class="w-16 h-16 mx-auto mb-6 text-[#F2AB27]">
            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-brand-dark font-georgia mb-4">Comodidades de Lujo</h3>
          <p class="text-gray-600 font-gotham leading-relaxed">
            Disfruta de habitaciones elegantes, gastronomía gourmet y espacios de bienestar diseñados para tu comodidad. Tu transformación se desarrolla en un ambiente de total lujo y tranquilidad.
          </p>
        </div>

        <div class="text-center group scroll-animate">
          <div class="w-16 h-16 mx-auto mb-6 text-[#F2AB27]">
            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-brand-dark font-georgia mb-4">Conexión Cultural</h3>
          <p class="text-gray-600 font-gotham leading-relaxed">
            Experimenta ceremonias auténticas dirigidas por chamanes indígenas respetados. Conecta con las tradiciones ancestrales y visita comunidades locales para una experiencia cultural profunda.
          </p>
        </div>

        <div class="text-center group scroll-animate">
          <div class="w-16 h-16 mx-auto mb-6 text-[#F2AB27]">
            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-brand-dark font-georgia mb-4">Bienestar Holístico</h3>
          <p class="text-gray-600 font-gotham leading-relaxed">
            Yoga, meditación, terapias de spa y actividades de bienestar complementan tu viaje de sanación. Cada elemento está diseñado para nutrir tu cuerpo, mente y espíritu de manera integral.
          </p>
        </div>

        <div class="text-center group scroll-animate">
          <div class="w-16 h-16 mx-auto mb-6 text-[#F2AB27]">
            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-brand-dark font-georgia mb-4">Experiencia Personalizada</h3>
          <p class="text-gray-600 font-gotham leading-relaxed">
            Grupos pequeños y atención individual garantizan que recibas el apoyo personalizado que necesitas. Cada huésped es único y tu experiencia se adapta a tus necesidades específicas.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-white scroll-animate">
      <div class="max-w-[1500px] mx-auto px-4 md:px-8">
        <GoogleReviews 
          title="Acepta los milagros: únete al 97 % de Casa del Jaguar."
          reviews={[
            {
              id: "1",
              name: "Candy Beatriz Rios Cahuaza",
              avatar: "/img/avatars/candy-beatriz-rios-cahuaza.webp",
              rating: 5,
              date: "Hace 6 meses",
              text: "La experiencia en la Casa del Jaguar es absolutamente imperdible. Desde el inicio, la atención es de primera, con un ambiente acogedor y armonioso. La ceremonia de Ayahuasca es guiada con profundo conocimiento y sabiduría, brindando una experiencia transformadora. Cada detalle, desde La preparación hasta la explicación, contribuye a hacer de esta sesión un momento único e inolvidable. Sin duda, una experiencia que recomiendo a quienes buscan una conexión auténtica y significativa.",
              location: "Perú"
            },
            {
              id: "2", 
              name: "Diego Reuch Borbor",
              avatar: "/img/avatars/diego-reuch-borbor.webp",
              rating: 5,
              date: "Hace 10 meses",
              text: "Una experiencia única en el lugar. Buena atención, preparación y el guiado en ceremonia es sencillamente personalizado, que se adapta a la situación de uno. Como producto de la potente conexión que tuve gracias a la madre ayahuasca y al maestro chaman pude expandir mis límites mentales y espirituales para forjar la transcendente consciencia que hoy me ayuda a tener una mejor calidad de vida. Definitivamente recomendaría visitar la Casa del Jaguar a toda persona que desee entender mejor su realidad y expandir su nivel de conciencia.",
              location: "Perú"
            },
            {
              id: "3",
              name: "Samuel Ballantine",
              rating: 5,
              date: "Hace 4 meses",
              text: "This is a place for people who truly want to heal. The shaman is truly dedicated he is. The kind of man who will sit and talk to you all day if you so desire it. He holds great insight and will be able to guide you through your ceremonies and help you understand what you are seeing and processing. Couldn’t recommend this place any more.",
              location: "Italia"
            },
            {
              id: "4",
              name: "Jacopo Foglia",
              rating: 5,
              date: "Hace 3 meses",
              text: "L’esperienza con lo sciamano Denis è stata davvero sorprendente! Avevo già partecipato ad una cerimonia di ayahuasca prima di quel momento, ma questa è stata davvero interessante ed intima. Ha guidato me ed il mio amico in un viaggio interiore indescrivibile, aiutandoci grazie a diverse ore di chiacchierata prima della cerimonia, spiegandoci il suo approccio con la medicina e spiegandoci come gestire la cerimonia nelle sue diverse fasi. Sicuramente parteciperò ad una nuova quando tornerò ad Iquitos.",
              location: "Italia"
            },
            {
              id: "5",
              name: "Felix Rios Teran",
              avatar: "/img/avatars/felix-rios-teran.webp",
              rating: 5,
              date: "Hace 1 año",
              text: "Maestro Denis muchas gracias por guiarme y curarme con tu sabiduría durante mi experiencia con la Madre Ayahuasca una experiencia transformadora que abre puertas a la introspección y la sanación. Estoy profundamente agradecido por tu cuidado, profesionalismo y dedicación. Le recomiendo a cualquier hermano que busque sanación y crecimiento espiritual en la CASA DEL JAGUAR",
              location: "Perú"
            },
            {
              id: "6",
              name: "Stella Palomares",
              avatar: "/img/avatars/stella-palomares.webp",
              rating: 5,
              date: "Hace 1 año", 
              text: "Una experiencia gratificante y llena de sabiduría con la acogedora atención del Sr Jaguar y su linda familia; sentimos mucha comodidad y linda energía. Fuimos bien guiados bajo el poder de la madre Ayahuasca ",
              location: "México"
            },
            {
              id: "7",
              name: "Victor Alfonso Vazquez Zapata",
              avatar: "/img/avatars/victor-alfonso-vazquez-zapata.webp",
              rating: 5,
              date: "Hace 1 año", 
              text: "La mejor experiencia de mi vida. Todo está espectacularmente calculado. Gracias Denis, nos vemos pronto. Saludos desde Aguascalientes, México.",
              location: "México"
            },
            {
              id: "8",
              name: "Clever Enrique",
              rating: 5,
              date: "Hace 4 meses", 
              text: "Une belle place et en plein securité pour vivre cette belle expérience. 100% recommander!",
              location: "Italia"
            }
          ]}
          autoplay={true}
          autoplayDelay={7000}
        />
      </div>
    </section>

    <Services />

    <TestimonialVideos 
      title="Transforma tu Vida en Casa del Jaguar"
      videos={[
        {
          id: "dQw4w9WgXcQ",
          title: "Experiencia Transformadora",
          description: "María González comparte su experiencia de sanación en Casa del Jaguar"
        },
        {
          id: "9bZkp7q19f0",
          title: "Un Viaje de Autodescubrimiento",
          description: "Carlos Mendoza sobre su proceso de sanación personal"
        },
        {
          id: "GtL1huin9EE",
          title: "Ceremonia Sagrada",
          description: "Ana Rodríguez reflexiona sobre la ceremonia de ayahuasca"
        },
        {
          id: "jNQXAC9IVRw",
          title: "Sanación Profunda",
          description: "Luis Torres sobre su proceso de sanación emocional"
        }
      ]}
    />

</Layout>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('pricingForm') as HTMLFormElement;
  const submitButton = document.getElementById('submitButton') as HTMLButtonElement;
  const successMessage = document.getElementById('successMessage') as HTMLElement;

  if (!form || !submitButton || !successMessage) return;

  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  function showError(field: HTMLElement, message: string) {
    const errorElement = field.parentElement?.querySelector('.error-message') as HTMLElement;
    if (errorElement) {
      errorElement.textContent = message;
      errorElement.classList.remove('hidden');
    }
    field.classList.add('border-red-500');
  }

  function hideError(field: HTMLElement) {
    const errorElement = field.parentElement?.querySelector('.error-message') as HTMLElement;
    if (errorElement) {
      errorElement.classList.add('hidden');
    }
    field.classList.remove('border-red-500');
  }

  function validateField(field: HTMLInputElement | HTMLSelectElement): boolean {
    const value = field.value.trim();
    
    if (field.hasAttribute('required') && !value) {
      showError(field, 'Este campo es requerido');
      return false;
    }

    if (field.type === 'email' && value && !emailPattern.test(value)) {
      showError(field, 'Por favor ingresa un email válido');
      return false;
    }

    hideError(field);
    return true;
  }

  const fields = form.querySelectorAll('input, select') as NodeListOf<HTMLInputElement | HTMLSelectElement>;
  fields.forEach(field => {
    field.addEventListener('blur', () => validateField(field));
    field.addEventListener('input', () => {
      if (field.classList.contains('border-red-500')) {
        validateField(field);
      }
    });
  });

  form.addEventListener('submit', async function(e) {
    e.preventDefault();

    let isValid = true;
    fields.forEach(field => {
      if (!validateField(field)) {
        isValid = false;
      }
    });

    if (!isValid) return;

    submitButton.disabled = true;
    submitButton.textContent = 'Enviando...';

    try {
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      form.classList.add('hidden');
      successMessage.classList.remove('hidden');
      
      successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
    } catch (error) {
      console.error('Error submitting form:', error);
      alert('Hubo un error al enviar el formulario. Por favor inténtalo de nuevo.');
    } finally {
      submitButton.disabled = false;
      submitButton.textContent = 'Enviar Solicitud';
    }
  });

  form.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && e.target !== submitButton) {
      e.preventDefault();
      submitButton.click();
    }
  });
});
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  const animatedElements = document.querySelectorAll('.scroll-animate');
  animatedElements.forEach(el => observer.observe(el));
});
</script>
