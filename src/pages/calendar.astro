---
import Layout from '@/layouts/Layout.astro';
import RetreatCalendar from '@/components/RetreatCalendar.astro';
import BookingForm from '@/components/BookingForm.astro';
import { useTranslations } from '@/i18n/utils';

export const prerender = true;

const t = useTranslations('es');
---

<Layout 
  title="Calendario de Retiros - Casa del Jaguar" 
  description="Consulta las fechas disponibles para nuestros retiros de medicina ancestral. Octubre y Noviembre 2025 en la Amazonía peruana."
  keywords="calendario retiros, fechas disponibles, ayahuasca, medicina ancestral, Casa del Jaguar, Amazonía, octubre 2025, noviembre 2025"
>
  
  <section class="hero relative h-[500px] -mt-16 pt-16 flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
      <img 
        src="/img/maloca-ceremonial.webp" 
        alt="Calendario de Retiros - Casa del Jaguar"
        class="w-full h-full object-cover"
      />
    </div>

    <div class="relative z-10 max-w-[1500px] mx-auto px-4 md:px-8 text-center">
      <h1 class="scroll-animate text-5xl md:text-7xl font-bold text-white font-georgia mb-8 leading-tight">
        Fechas Disponibles
      </h1>
      
      <p class="scroll-animate text-xl md:text-[19px] text-white brand-cream mb-12 max-w-4xl mx-auto font-gotham leading-relaxed">
        Descubre las próximas fechas para tu transformación espiritual en el corazón de la Amazonía peruana. Cada retiro es una experiencia única de 7 días.
      </p>
    </div>
  </section>
  
  <main>
    <section class="pt-15 bg-gradient-to-b from-brand-cream to-white">
      <div class="w-full max-w-[1500px] mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-4xl md:text-5xl font-bold text-brand-dark mb-8 font-georgia leading-tight">
            Próximos Retiros de <span class="text-brand-gold">Medicina Ancestral</span>
          </h2>
          
          <p class="text-xl text-brand-secondary leading-relaxed">
            Descubre las fechas disponibles para tu transformación espiritual en el corazón de la Amazonía peruana. 
            Cada retiro es una experiencia única de 7 días que cambiará tu perspectiva de la vida.
          </p>
        </div>
      </div>
    </section>

    <section class="py-16 bg-white">
      <div class="w-full max-w-[1500px] mx-auto px-4 sm:px-6 lg:px-8">
        <RetreatCalendar lang="es" />
      </div>
    </section>

  </main>
</Layout>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const calendar = document.querySelector('.retreat-calendar');
  const bookingForm = document.getElementById('booking-form');
  
  if (calendar && bookingForm) {
    calendar.addEventListener('retreatSelected', function(e) {
      bookingForm.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
      
      const customEvent = e as CustomEvent;
      console.log('Retreat selected:', customEvent.detail);
    });
  }
});
</script>
